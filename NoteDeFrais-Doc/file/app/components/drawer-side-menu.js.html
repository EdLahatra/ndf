<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">app/components/drawer-side-menu.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/index.js~Index.html">Index</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/DepenseCommuneNavBar.js~DepenseCommuneNavBar.html">DepenseCommuneNavBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/NavBar.js~NavBar.html">NavBar</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/datepicker-field-factory.js~DatePicker.html">DatePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/datepicker.js~DatePicker.html">DatePicker</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/distance.js~Distance.html">Distance</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/icon-field-factory.js~IconFieldFactory.html">IconFieldFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/image-field-factory.js~ImageFieldFactory.html">ImageFieldFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/list-edit-with-menu.js~ListEditWithMenu.html">ListEditWithMenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/list-edit.js~ListEdit.html">ListEdit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/place-autocomplete.js~PlaceAutocomplete.html">PlaceAutocomplete</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/realm-form.js~RealmForm.html">RealmForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/select-field-factory.js~SelectFieldFactory.html">SelectFieldFactory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/select.js~Select.html">Select</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/textbox-field-factory.js~Textbox.html">Textbox</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/components/valeursAnalytiques-autocomplete.js~PlaceAutocomplete.html">PlaceAutocomplete</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Component">Component</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">errors</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ApiServiceAccess">ApiServiceAccess</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">lib</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/lib/Logger.js~Logger.html">Logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createIconSet">createIconSet</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">routes</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/CategorieDepenseForm.js~CategorieDepenseForm.html">CategorieDepenseForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/CategorieDepenseListe.js~CategorieDepenseListe.html">CategorieDepenseListe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/CategorieDepenseSelection.js~CategorieDepenseSelection.html">CategorieDepenseSelection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/Chargement.js~Chargement.html">Chargement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/Connexion.js~Connexion.html">Connexion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/DepenseCommuneHistoriqueListe.js~DepenseCommuneHistoriqueListe.html">DepenseCommuneHistoriqueListe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/DepenseCommuneListe.js~DepenseCommuneListe.html">DepenseCommuneListe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/DepenseForm.js~DepenseCommuneForm.html">DepenseCommuneForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/FichePersonnelleForm.js~FichePersonnelleForm.html">FichePersonnelleForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/IndemniteKilometriqueForm.js~IndemniteKilometriqueForm.html">IndemniteKilometriqueForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/Login.js~Login.html">Login</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/NoteDeFraisListe.js~NoteDeFraisListe.html">NoteDeFraisListe</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/Presentation.js~Presentation.html">Presentation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/VehiculeForm.js~VehiculeForm.html">VehiculeForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/routes/VehiculeListe.js~VehiculeListe.html">VehiculeListe</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">schemas</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/AxeAnalytique.js~AxeAnalytique.html">AxeAnalytique</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/BaremeKilometrique.js~BaremeKilometrique.html">BaremeKilometrique</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/CategorieDepense.js~CategorieDepense.html">CategorieDepense</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/CompteSecure.js~CompteSecure.html">CompteSecure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Configuration.js~Configuration.html">Configuration</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Depense.js~Depense.html">Depense</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/FichePersonnelle.js~FichePersonnelle.html">FichePersonnelle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Identifiant.js~Identifiant.html">Identifiant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/IndemniteKilometrique.js~IndemniteKilometrique.html">IndemniteKilometrique</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Justificatif.js~Justificatif.html">Justificatif</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/KilometreAnnuel.js~KilometreAnnuel.html">KilometreAnnuel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/NoteDeFrais.js~NoteDeFrais.html">NoteDeFrais</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Regulation.js~Regulation.html">Regulation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Seuil.js~Seuil.html">Seuil</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/ValeurAnalytique.js~ValeurAnalytique.html">ValeurAnalytique</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/schemas/Vehicule.js~Vehicule.html">Vehicule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TYPES">TYPES</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-STATUTS">STATUTS</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">services</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/ApiService.js~ApiService.html">ApiService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/AxeAnalytiqueService.js~AxeAnalytiqueService.html">AxeAnalytiqueService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/BaremeKilometriqueService.js~BaremeKilometriqueService.html">BaremeKilometriqueService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/CategorieDepenseService.js~CategorieDepenseService.html">CategorieDepenseService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/CompteSecureService.js~CompteSecureService.html">CompteSecureService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/CompteService.js~CompteService.html">CompteService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/ConfigurationService.js~ConfigurationService.html">ConfigurationService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/DepenseService.js~DepenseService.html">DepenseService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/EntityService.js~EntityService.html">EntityService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/FichePersonnelleService.js~FichePersonnelleService.html">FichePersonnelleService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/IndemniteKilometriqueService.js~IndemniteKilometriqueService.html">IndemniteKilometriqueService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/JustificatifService.js~JustificatifService.html">JustificatifService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/NoteDeFraisService.js~NoteDeFraisService.html">NoteDeFraisService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/RealmService.js~RealmService.html">RealmService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/ValeurAnalytiqueService.js~ValeurAnalytiqueService.html">ValeurAnalytiqueService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/services/VehiculeService.js~VehiculeService.html">VehiculeService</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">styles</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-style">style</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Style">Style</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">app/components/drawer-side-menu.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, { Component, } from &apos;react&apos;;

import {
    Text,
    View,
    ListView,
    TouchableOpacity,
    InteractionManager,
    Alert,
    ScrollView
} from &apos;react-native&apos;;

import Drawer from &apos;react-native-drawer&apos;;
import { Actions, DefaultRenderer } from &apos;react-native-router-flux&apos;;
import I18n from &apos;../i18n/translations&apos;;
import Glyphicons from &apos;../Glyphicons&apos;;
import MaterialIcons from &apos;react-native-vector-icons/MaterialIcons&apos;;

import { Style, Colors, IconSize } from &apos;../styles/style&apos;;

import { TYPES } from &apos;../schemas/Compte&apos;;
import { STATUTS } from &apos;../schemas/NoteDeFrais&apos;;
import CompteSecureService from &apos;../services/CompteSecureService&apos;;
import FichePersonnelleService from &apos;../services/FichePersonnelleService&apos;;
import NoteDeFraisService from &apos;../services/NoteDeFraisService&apos;;

const ds = new ListView.DataSource({ rowHasChanged: (r1, r2) =&gt; r1 !== r2 });

const compteSecureService = new CompteSecureService();
const fichePersonnelleService = new FichePersonnelleService();
const noteDeFraisService = new NoteDeFraisService();

class SideMenu extends Component {

  /**
   * Initialisation de l&apos;&#xE9;tat du composant.
   * Initialisation de l&apos;ensemble des services utiles pour le chargement des donn&#xE9;es.
   */
  constructor () {
    super();
    /** @type {Object} */
    this.state = {
      selectedAccount: { compte: {} },
      isAccountsDisplayed: false,
      fichePersonnelle: {},
      actions: ds.cloneWithRows({}),
      accounts: ds.cloneWithRows({}),
      report: ds.cloneWithRows({})
    };
  }

  componentWillReceiveProps () {
    this.componentDidMount();
  }

  async _componentDidMount () {
    const accounts = compteSecureService.findAll();
    const selectedAccount = compteSecureService.getSelectedAccount();
    if (selectedAccount) {

      const actions = [
        { name: &apos;vehiculeListe&apos;, icon: &apos;car&apos; },
        { name: &apos;categorieDepenseListe&apos;, icon: &apos;tags&apos; },
        { name: &apos;fichePersonnelleForm&apos;, icon: &apos;user&apos; }
      ];

      if (selectedAccount.typeCompte === TYPES.GESCAB) {
        actions.pop();
      }

      const report = noteDeFraisService.getRapport(selectedAccount ? selectedAccount.compte : {});
      let fichePersonnelle = null;
      if (selectedAccount &amp;&amp; selectedAccount.compte) {
        const idFichePersonnelle = selectedAccount.compte.idFichePersonnelle;
        if (idFichePersonnelle) {
          fichePersonnelle = fichePersonnelleService.find(idFichePersonnelle);
        }
      }

      this.setState({
        selectedAccount: selectedAccount,
        fichePersonnelle: fichePersonnelle,
        actions: ds.cloneWithRows(actions),
        report: ds.cloneWithRows(report),
        accounts: ds.cloneWithRows(accounts)
      });

      if (selectedAccount &amp;&amp; selectedAccount.compte &amp;&amp; compteSecureService.shouldUseApiServiceWith(selectedAccount)) {
        const idFichePersonnelle = selectedAccount.compte.idFichePersonnelle;
        if (idFichePersonnelle) {
          fichePersonnelle = await fichePersonnelleService.merge(idFichePersonnelle);
          if (fichePersonnelle) {
            this.setState({
              fichePersonnelle: fichePersonnelle
            });
          }
        }
      }
    }
  }

  componentDidMount () {
    InteractionManager.runAfterInteractions(()=&gt; this._componentDidMount());
  }

  _onPressAction (key) {
    Actions[key]();
  }

  _onPressReport (status) {
    if (STATUTS[status] === STATUTS.inProgress) {
      const selectedAccound = compteSecureService.getSelectedAccount();
      const noteDeFrais = noteDeFraisService.find(noteDeFraisService.findEnCours(selectedAccound.compte));
      Actions.depenseCommuneListe({ noteDeFrais });
    }
    else {
      Actions.noteDeFraisListe({ statut: STATUTS[status].key });
    }
  }

  _renderReport (report) {

    let label = STATUTS[report.status].key === STATUTS.inProgress.key ?
        &lt;View style={[Style.badge, Style.success]}&gt;
          &lt;Text style={[Style.labelSmallText]}&gt;{report.num}&lt;/Text&gt;
        &lt;/View&gt; :
        &lt;View style={[Style.badge, Colors.greyDarker.background()]}&gt;
          &lt;Text style={[Style.labelSmallText]}&gt;{report.num}&lt;/Text&gt;
        &lt;/View&gt;;

    return (
        &lt;TouchableOpacity onPress={this._onPressReport.bind(this, report.status)}
                          style={[Style.flexRowCenter, { marginVertical: 2, paddingVertical: 5 }]}&gt;
          &lt;Text style={[Style.h3, { flex: 1 }]}&gt; - &lt;/Text&gt;
          &lt;Text style={[Style.h3, { flex: 3 }]}&gt;{I18n.t(&apos;states.&apos; + report.status)}&lt;/Text&gt;
          &lt;View style={{ flex: 3, alignItems: &apos;flex-end&apos;, justifyContent: &apos;flex-end&apos; }}&gt;{label}&lt;/View&gt;
        &lt;/TouchableOpacity&gt;
    );
  }

  _renderAction (action) {
    return (

        &lt;TouchableOpacity onPress={this._onPressAction.bind(this, action.name)}
                          style={[Style.flexRowCenter, { marginVertical: 2, paddingVertical: 5 }]}&gt;
          &lt;View style={{
            flex: 1,
            alignItems: &apos;center&apos;,
            justifyContent: &apos;center&apos;
          }}&gt;
            &lt;Glyphicons name={action.icon} size={IconSize.medium} color={Colors.greyDarker.code} style={{
              textAlign: &apos;center&apos;,
              width: IconSize.medium * 2
            }}/&gt;
          &lt;/View&gt;

          &lt;Text style={[Style.h3, { flex: 3 }]}&gt;{I18n.t(&apos;sideMenu.&apos; + action.name)}&lt;/Text&gt;
        &lt;/TouchableOpacity&gt;
    );
  }

  _deleteAccountAfterConfirm (account) {
    if (account._isCandidateForDeletion) {
      const selectedAccount = compteSecureService.delete(account);
      this.setState({
        selectedAccount: { compte: {} },
        fichePersonnelle: {},
        actions: ds.cloneWithRows({}),
        accounts: ds.cloneWithRows({}),
        report: ds.cloneWithRows({})
      });

      if (selectedAccount === null) {
        Actions.presentation({ type: &apos;reset&apos; });
        Actions.refresh({ key: &apos;drawer&apos;, open: false });
      }
      else {
        this.componentDidMount();
      }

    }
  }

  _onPressAccount (account) {
    if (account._isCandidateForDeletion) {

      let title = I18n.t(&apos;sideMenu.confirm.title&apos;);
      let message = I18n.t(&apos;sideMenu.confirm.deletionSimple&apos;);
      if (compteSecureService.shouldUseApiServiceWith(account)) {
        message = I18n.t(&apos;sideMenu.confirm.deletion&apos;, { typeCompte: account.typeCompte });
      }

      Alert.alert(title, message,
          [
            { text: I18n.t(&apos;Alert.ok&apos;), onPress: this._deleteAccountAfterConfirm.bind(this, account) },
            { text: I18n.t(&apos;Alert.cancel&apos;), style: &apos;cancel&apos; }
          ]
      );

    }
    else {
      compteSecureService.setSelected(account);
      this._componentDidMount().then(()=&gt; {
        Actions.chargement();
      });

    }
  }

  _onLongPressAccount (account) {

    const accounts = compteSecureService.findAll().map((acc)=&gt; {
      if (acc.id === account.id) {
        acc._isCandidateForDeletion = true;
      }
      return acc;
    });
    this.setState({ accounts: ds.cloneWithRows(accounts) });
  }

  _renderAccountIcon (account) {
    const iconName = account.typeCompte === TYPES.AUTONOME ? &apos;theater&apos; : &apos;user&apos;;
    const color = account._isCandidateForDeletion ? Colors.redGoogle.code : Colors.greyDarker.code;
    return &lt;Glyphicons name={iconName} size={IconSize.medium} color={color}/&gt;;
  }

  _getAccountName (fichePersonnelle) {

    if (fichePersonnelle) {
      if (fichePersonnelle.prenom || fichePersonnelle.nom) {
        return `${fichePersonnelle.prenom ? fichePersonnelle.prenom : &apos;&apos;} ${fichePersonnelle.nom ? fichePersonnelle.nom : &apos;&apos; }`;
      }
    }
    return I18n.t(&apos;FichePersonnelle.anonymous&apos;);
  }

  _renderAccount (account) {
    const compte = account.compte;
    let iconStyle = { flex: 1, alignItems: &apos;center&apos;, justifyContent: &apos;center&apos; };

    let society = null;
    let accountStyle = null;
    let selectedIcon = null;
    let fichePersonnelle = null;

    let buttonStyle = null;

    if (account._isCandidateForDeletion) {
      selectedIcon =
          &lt;View animation=&quot;jello&quot; style={[iconStyle]}&gt;
            &lt;MaterialIcons name=&quot;remove-circle&quot; size={IconSize.medium} style={Colors.redGoogle.color()}/&gt;
          &lt;/View&gt;;
      fichePersonnelle = compte.idFichePersonnelle ? fichePersonnelleService.find(compte.idFichePersonnelle) : null;
    }
    else if (account.isSelected) {
      selectedIcon = &lt;View style={[iconStyle]}&gt;
        &lt;MaterialIcons name=&quot;check&quot; size={IconSize.medium} style={Colors.yellowGreen.color()}/&gt;
      &lt;/View&gt;;
      fichePersonnelle = this.state.fichePersonnelle;
    }
    else {
      selectedIcon = &lt;View style={iconStyle}&gt;&lt;/View&gt;;
      fichePersonnelle = compte.idFichePersonnelle ? fichePersonnelleService.find(compte.idFichePersonnelle) : null;
    }

    if (fichePersonnelle &amp;&amp; fichePersonnelle.societe) {
      society = &lt;Text style={Style.h3} numberOfLines={1}&gt; {fichePersonnelle.societe}&lt;/Text&gt;;
      iconStyle.minHeight = IconSize.medium * 2
    }

    return (

        &lt;TouchableOpacity onPress={this._onPressAccount.bind(this, account)}
                          onLongPress={this._onLongPressAccount.bind(this, account)}
                          style={[Style.flexRowCenter, { marginVertical: 10 }, buttonStyle]}&gt;

          &lt;View style={iconStyle}&gt;
            {this._renderAccountIcon(account)}
          &lt;/View&gt;

          &lt;View style={[{ flex: 4 }, accountStyle]}&gt;
            &lt;Text style={[Style.h3]} numberOfLines={1}&gt; {this._getAccountName(fichePersonnelle)}&lt;/Text&gt;
            {society}
          &lt;/View&gt;

          {selectedIcon}

        &lt;/TouchableOpacity&gt;
    );
  }

  _onPressAddAccount () {
    Actions.connexion({ shouldAddAccount: true });
  }

  _toggleContent () {
    this.setState({ isAccountsDisplayed: !this.state.isAccountsDisplayed });
  }

  _renderContent () {
    if (this.state.isAccountsDisplayed) {
      return &lt;View style={{ padding: 10, flex: 1 }}&gt;

        &lt;ListView
            enableEmptySections={true}
            dataSource={this.state.accounts}
            renderRow={this._renderAccount.bind(this)}/&gt;

        &lt;TouchableOpacity onPress={this._onPressAddAccount.bind(this)}
                          style={[Style.flexRowCenter]}&gt;
          &lt;View style={{
            flex: 1,
            alignItems: &apos;center&apos;,
            justifyContent: &apos;center&apos;
          }}&gt;
            &lt;MaterialIcons name=&quot;add&quot; size={IconSize.medium} style={[Colors.greyDarker.color()]}/&gt;
          &lt;/View&gt;

          &lt;Text style={[Style.h3, { flex: 3 }]}&gt;{I18n.t(&apos;sideMenu.addAccount&apos;)}&lt;/Text&gt;

          &lt;View style={{ flex: 1 }}&gt;&lt;/View&gt;

        &lt;/TouchableOpacity&gt;

      &lt;/View&gt;;
    }
    else {
      return &lt;View&gt;
        &lt;View style={{ padding: 10 }}&gt;

          &lt;Text style={[Style.h3]}&gt;
            {I18n.t(&apos;account.currentFees&apos;) + &apos; :&apos;}
          &lt;/Text&gt;

          &lt;ListView
              enableEmptySections={true}
              style={{ paddingLeft: 15 }} dataSource={this.state.report}
              renderRow={this._renderReport.bind(this)}/&gt;

        &lt;/View&gt;

        &lt;View style={{ height: 1, backgroundColor: &apos;#CCCCCC&apos;, }}/&gt;

        &lt;ListView enableEmptySections={true}
                  style={{ paddingVertical: 10 }} dataSource={this.state.actions}
                  renderRow={this._renderAction.bind(this)}/&gt;
      &lt;/View&gt;;
    }

  }

  _getAccountIcon () {
    return this.state.isAccountsDisplayed ? &quot;arrow-drop-up&quot; : &quot;arrow-drop-down&quot;;
  }


  /**
   * M&#xE9;thode &#xE9;x&#xE9;cut&#xE9; lors du rendu du composant.
   *
   * @function render
   * @return react~Component
   */
  render () {

    const compte = this.state.selectedAccount &amp;&amp; this.state.selectedAccount.compte ? this.state.selectedAccount.compte : {};

    return (
        &lt;View style={Style.sideMenu}&gt;

          &lt;View style={[{ padding: 5, paddingTop: 50 }, Colors.red.background()]}&gt;

            &lt;TouchableOpacity onPress={this._toggleContent.bind(this)} style={{ height: 50 }}&gt;

              &lt;Text style={[Style.h3, Colors.white.color()]}&gt;
                {this._getAccountName(this.state.fichePersonnelle)}
              &lt;/Text&gt;

              &lt;View style={[Style.inline, { padding: 5 }]}&gt;

                &lt;Text style={[{ flex: 1 }, Colors.white.color()]}&gt;
                  {I18n.t(&apos;account.&apos; + compte.typeCompte)}
                &lt;/Text&gt;

                &lt;MaterialIcons name={this._getAccountIcon()} size={IconSize.medium} style={[Colors.white.color()]}/&gt;

              &lt;/View&gt;

            &lt;/TouchableOpacity&gt;

          &lt;/View&gt;

          &lt;ScrollView ref=&apos;scrollView&apos; keyboardDismissMode=&apos;none&apos; showsVerticalScrollIndicator={true}&gt;
            {this._renderContent()}
          &lt;/ScrollView&gt;

        &lt;/View &gt;);
  }
}

class DrawerSideMenu extends Component {

  render () {
    const state = this.props.navigationState;
    const children = state.children;

    return (
        &lt;Drawer
            ref=&quot;navigation&quot;
            open={state.open}
            onOpen={()=&gt;Actions.refresh({ key: state.key, open: true })}
            onClose={()=&gt;Actions.refresh({ key: state.key, open: false })}
            onCloseStart={state.onCloseStart}
            type=&quot;overlay&quot;
            content={&lt;SideMenu/&gt;}
            tapToClose={true}
            openDrawerOffset={0.2}
            closedDrawerOffset={-3}
            panCloseMask={0.2}
            useInteractionManager={true}
            acceptPan={true}
            styles={{
              drawer: { shadowColor: &apos;#000000&apos;, shadowOpacity: 0.8, shadowRadius: 3 },
            }}
            tweenHandler={(ratio) =&gt; ({
              main: { opacity: (2 - ratio) / 2 }
            })
            }&gt;
          &lt;DefaultRenderer navigationState={children[0]} onNavigate={this.props.onNavigate}/&gt;
        &lt;/Drawer&gt;
    );
  }
}

module.exports = { SideMenu, DrawerSideMenu };</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
